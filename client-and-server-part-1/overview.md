# Клиент и сервер — часть 1

В качестве первого шага мы напишем тривиальный `echo` сервер и клиент: клиенты могут подключиться к серверу и отправить строки UTF-8, а сервер отправит их обратно. Более формально клиент будет:

1. Отправлять исходную строку `HELLO <port>` , где `<port>` — это десятичное целое число без знака, указывающее порт, на который следует отправлять ответы от сервера.
2. Если исходная строка `HELLO` была отправлена, клиент отправит бесконечную серию произвольных 32-разрядных десятичных целых чисел без знака, закодированных в виде строк UTF-8, по одной строке в секунду.

Сервер будет:

1. Ждать, пока клиент подключится, а затем читать исходное сообщение `HELLO <port>`.
2. Для каждого подключенного клиента `c` сервер будет считывать строку `s` из `c` а затем отправлять обратно ту же самую строку `s` на исходный адрес `c` и порт `p` , указанный `c` в его исходной строке `HELLO` .

Мы рассмотрим простейшую возможную реализацию, которая может сработать, а затем критически оценим ее, чтобы создать вторую, лучшую реализацию. Не будет предпринято никаких попыток создать эффективный код: в конце концов, мы отправляем строки UTF-8 в виде сообщений; Будут аллокации в памяти! Для этого примера кода, если необходимо сделать какой-либо выбор между эффективностью, правильностью или простотой, простота будет выбираться каждый раз.

Чтобы написать сервер, необходимо выполнить следующие шаги:

1. Запустите медиа-драйвер.
2. Создайте подписку, которая будет использоваться для чтения сообщений от клиентов.
3. Начните цикл, создавая новые публикации / подписки для клиентов при их подключении, и читая / записывая сообщения от / к существующим клиентам.

Для написания клиента необходимы следующие шаги:

1. Запустите медиа-драйвер.
2. Создайте публикацию, которая будет использоваться для отправки сообщений на сервер.
3. Заходите в цикл, отправляя сообщения на сервер и читая ответы.

Для простоты мы сначала напишем клиент. Весь код, представленный здесь, доступен как проект Maven на [GitHub](https://github.com/io7m/aeron-guide), но выдержки будут напечатаны здесь для пояснительных целей.  


